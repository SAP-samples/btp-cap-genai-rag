<mvc:View
	controllerName="aisaas.ui.controller.Main"
	displayBlock="true"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:l="sap.ui.layout"
    xmlns:tnt="sap.tnt"
    xmlns:core="sap.ui.core"
	core:require="{ formatter:
	'aisaas/ui/model/formatter' }">

	<Page title="{i18n>appTitle}" class="sapUiResponsivePadding--header">
        <headerContent></headerContent>
        <content>
            <l:Splitter>
                <l:FixFlex>
                    <l:layoutData><l:SplitterLayoutData size="12%"/></l:layoutData>
                    <l:fixContent/>
                    <l:flexContent>
                        <ScrollContainer width="100%" height="100%" horizontal="false" vertical="true"/>
                    </l:flexContent>
                </l:FixFlex>

                <l:FixFlex>
                    <l:layoutData><l:SplitterLayoutData size="23%"/></l:layoutData>
                    <l:fixContent/>

                    <l:flexContent>
                        <ScrollContainer width="100%" height="100%" horizontal="false" vertical="true">
                            <List
                                id="emailsList"
                                mode="SingleSelectMaster"
                                noDataText="{i18n>list.label.noData}"
                                items="{
                                    path: 'api>/Mails',
                                    parameters: { $select: 'translationSubject,translationBody' }
                                }"
                                selectionChange="onPressItem">
                                <CustomListItem tooltip="{api>subject}">
                                    <HBox class="sapUiSmallMargin" justifyContent="SpaceBetween">
                                        <HBox justifyContent="Center">
                                            <Avatar
                                                displaySize="M"
                                                backgroundColor="Accent6"
                                                initials="{path:'api>sender', formatter:'formatter.getAvatarInitial'}"/>
                                        </HBox>
                                        <VBox width="calc(100% - 5rem)">
                                            <HBox justifyContent="SpaceBetween">
                                                <Label text="{api>sender}" wrapping="true"/>
                                                <Label text="{path: 'api>modifiedAt', formatter: 'formatter.formatDate'}" wrapping="true"/>
                                            </HBox>
                                            <HBox class="sapUiTinyMarginTop" justifyContent="SpaceBetween">
                                                <tnt:InfoLabel displayOnly="true" text="{api>category}"/>
                                                <HBox justifyContent="End">
                                                    <ObjectStatus
                                                        icon="{path:'api>sentiment', formatter:'formatter.getSentimentIcon'}"
                                                        state="{path:'api>sentiment', formatter:'formatter.getSentimentState'}"/>
                                                    <ObjectStatus
                                                        icon="sap-icon://high-priority"
                                                        state="{path:'api>urgency', formatter:'formatter.getUrgencyState'}"/>
                                                </HBox>
                                            </HBox>
                                            <VBox class="sapUiTinyMarginTop">
                                                <Title text="{api>subject}"/>
                                                <Text maxLines="2" text="{api>body}"/>
                                            </VBox>
                                        </VBox>
                                    </HBox>
                                </CustomListItem>
                            </List>
                        </ScrollContainer>
                    </l:flexContent>
                </l:FixFlex>
                
                <mvc:XMLView id="emailColumn" viewName="aisaas.ui.view.EmailColumn" visible="{= ${emailModel>/ID} !== null }"/>
            </l:Splitter>
        </content>
    </Page>

</mvc:View>